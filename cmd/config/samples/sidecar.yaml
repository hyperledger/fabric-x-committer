# Copyright IBM Corp. All Rights Reserved.
#
# SPDX-License-Identifier: Apache-2.0
#
---
server:
  endpoint: :4001
  tls:
    # TLS configuration being built based on the tls mode chosen: none, tls, mtls.
    mode: mtls
    cert-path: /server-certs/public-key.pem
    key-path: /server-certs/private-key.pem
    ca-cert-paths:
      - /server-certs/ca-certificate.pem
  keep-alive:
    params:
      time: 300s
      timeout: 600s
    enforcement-policy:
      min-time: 60s
      permit-without-stream: false
  # Rate limiting configuration for unary gRPC endpoints.
  # Uses a token bucket algorithm to limit the number of requests per second.
  rate-limit:
    # Maximum number of requests per second allowed.
    # Set to 0 to disable rate limiting.
    requests-per-second: 0
    # Maximum number of requests allowed in a single burst.
    # When rate limiting is enabled (requests-per-second > 0):
    #   - Must be greater than 0
    #   - Must be less than or equal to requests-per-second
    burst: 0
monitoring:
  endpoint: :2114
  tls:
    mode: mtls
    cert-path: /server-certs/public-key.pem
    key-path: /server-certs/private-key.pem
    ca-cert-paths:
      - /server-certs/ca-certificate.pem
  rate-limit:
    requests-per-second: 0
    burst: 0

orderer:
  channel-id: mychannel
  # Organizations map organization MSP IDs to their orderer connection details.
  # It supports multi-organization deployments where each org has its own orderers and TLS root CAs.
  organizations:
    org0:
      endpoints:
        - id=0,broadcast,deliver,orderer:7050
      ca-cert-paths:
        - /client-certs/ca-certificate.pem
  # Sidecar uses these TLS credentials when connecting to the orderers as a client.
  tls:
    # TLS configuration being built based on the tls mode chosen: none, tls, mtls.
    mode: mtls
    cert-path: /client-certs/public-key.pem
    key-path: /client-certs/private-key.pem
    common-ca-cert-paths:
      - /client-certs/ca-certificate.pem
  identity:
    msp-id: peer-org-0
    msp-dir: /root/material/peerOrganizations/peer-org-0/users/client@peer-org-0.com/msp
    bccsp:
      Default: SW
      SW:
        Security: 256
        Hash: SHA2
committer:
  endpoint: coordinator:9001
  tls:
    # TLS configuration being built based on the tls mode chosen: none, tls, mtls.
    mode: mtls
    cert-path: /client-certs/public-key.pem
    key-path: /client-certs/private-key.pem
    ca-cert-paths:
      - /client-certs/ca-certificate.pem
ledger:
  path: /root/sc/ledger
  # How often the block store fsyncs to durable storage. Every Nth block triggers
  # a full sync; intermediate blocks are written without fsync. Set to 0 or 1 to
  # sync every block. Un-synced blocks are recoverable from the orderer on crash.
  sync-interval: 100
notification:
  max-timeout: 10m
  # Maximum number of concurrent notification streams allowed.
  # Set to 0 for unlimited streams (default).
  max-concurrent-streams: 0

bootstrap:
  genesis-block-file-path: /root/material/config-block.pb.bin

last-committed-block-set-interval: 5s
waiting-txs-limit: 20_000_000
channel-buffer-size: 100

logging:
  logSpec: "info"
  format: >-
    %{color}%{time:2006-01-02 15:04:05.000 MST} [%{module}] %{shortfunc}
    -> %{level:.4s}%{color:reset} %{message}

